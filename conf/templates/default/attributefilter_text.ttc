#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.22
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1168362960',
        'name' => 'attributefilter_text.tt',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $_tt_error;
        
        eval { BLOCK: {
    
    
#line 77 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    
    # MACRO
    $stash->set('render_textfield', sub {
        my $output = '';
        my (%_tt_args, $_tt_params);
        @_tt_args{ 'filter', 'param_name', 'attrparam_name' } = splice(@_, 0, 3);
        $_tt_params = shift;
        $_tt_params = { } unless ref($_tt_params) eq 'HASH';
        $_tt_params = { %_tt_args, %$_tt_params };
    
        my $stash = $context->localise($_tt_params);
        eval {
#line 11 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('dataset_name', $stash->get(['filter', 0, 'pointedFromDataset', 0]) || $stash->get(['filter', 0, 'dataSetName', 0]));
    
#line 2 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('onblur_js', ("\nif(filterEltHasValue(this)) {\n    checkAttributeCheckbox('" . $stash->get('attrparam_name') . "');\n};\n"));
    
#line 17 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('onblur_js', $stash->get(['onblur_js', 0, 'replace', [ ('' . "\n"), '' ]]));
    
#line 72 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    if ($stash->get(['filter', 0, 'multipleValues', 0]) || $stash->get(['filter', 0, 'filter', 0, 'multipleValues', 0])) {
    
    $output .=  "<textarea name=\"";
#line 21 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "\" cols=\"25\" rows=\"4\" onblur=\"";
#line 21 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('onblur_js');
    $output .=  "\">\n[* session.param(\"";
#line 22 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "\") || '' *]\n</textarea>\n<br />";
    
    $output .=  "<input type=\"file\" name=\"";
#line 26 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "__file\" value=\"\" size=\"16\" onchange=\"";
#line 26 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('onblur_js');
    $output .=  "\" />\n<input type=\"hidden\" name=\"upload_file_params\" value=\"";
#line 27 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "__file\" />\n";
    }
    else {
    
    $output .=  "<input type=\"text\" name=\"";
#line 31 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "\" value=\"\n[* IF session.param(\"";
#line 32 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "\").defined() *]\n  [* session.param(\"";
#line 33 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "\") *]\n[* ELSE *]";
#line 35 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get(['filter', 0, 'defaultValue', 0]) || '';
    $output .=  "[* END *]\n\" \n\n\n";
#line 41 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('autocomplete', $stash->get(['filter', 0, 'autoCompletion', 0]));
    
#line 50 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    if ($stash->get('autocomplete')) {
#line 43 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('min_wordsize', $stash->get(['autocomplete', 0, 'split', [ ';' ], 0, 0]));
    
#line 44 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('max_resultcount', $stash->get(['autocomplete', 0, 'split', [ ';' ], 1, 0]));
    
    $output .=  " autocomplete=\"off\" onkeyup=\"preAutocomplete(this, '[* session.param('schema') *]', '";
#line 45 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('dataset_name');
    $output .=  "', '";
#line 45 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get(['filter', 0, 'name', 0]);
    $output .=  "','";
#line 45 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get(['filter', 0, 'attribute', 0, 'name', 0]);
    $output .=  "', '";
#line 45 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('min_wordsize');
    $output .=  "','";
#line 45 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('max_resultcount');
    $output .=  "'); return true;\" onblur=\"var acNode; if(acNode = document.getElementById(this.name+'__acresults')){document.body.removeChild(acNode);}; ";
#line 45 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('onblur_js');
    $output .=  "\" />\n<span id=\"";
#line 46 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "__acprogress\">&nbsp;</span>";
    
    }
    else {
    $output .=  "onblur=\"";
#line 49 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('onblur_js');
    $output .=  "\" />";
    }
    
#line 52 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $stash->set('buttonURL', $stash->get(['filter', 0, 'buttonURL', 0]));
    
#line 63 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    if ($stash->get('buttonURL')) {
    $output .=  "<input type='button'\n               name=\"";
#line 55 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('param_name');
    $output .=  "__button\"\n	       value='<browse>' ONCLICK='javascript:\n                                          var nW = window.open(\"";
#line 57 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get('buttonURL');
    $output .=  "\", \"";
#line 57 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    $output .=  $stash->get(['filter', 0, 'displayName', 0]);
    $output .=  "\",\n                                                               \"menubar=no,scrollbars=yes,width=800,height=800\");\n                                          if( nW.opener == null ){\n                                          nW.opener = window;\n                                         }' >\n	";
    }
    
#line 69 "/Users/do2/projects/htgt_mart/server/conf/templates/default/attributefilter_text.tt"
    if ($stash->get(['filter', 0, 'graph', 0])) {
    $output .=  "	";
    
    }
    
    $output .=  "\n";
    }
    
    $output .=  "\n\n\n";
        };
        $stash = $context->delocalise();
        die $@ if $@;
        return $output;
    });
    
        } };
        if ($@) {
            $_tt_error = $context->catch($@, \$output);
            die $_tt_error unless $_tt_error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {

    },
});
